<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="POS - Bootstrap Admin Template">
    <meta name="keywords"
          content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
    <meta name="author" content="Dreamguys - Bootstrap Admin Template">
    <meta name="robots" content="noindex, nofollow">
    <title>Teezy Shop - Admin</title>


    <link rel="shortcut icon" type="image/x-icon" href="/images/img/icon.png">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/plugins/owlcarousel/owl.carousel.min.css">
    <link rel="stylesheet" href="/plugins/owlcarousel/owl.theme.default.min.css">
    <link rel="stylesheet" href="/plugins/select2/css/select2.min.css">
    <link rel="stylesheet" href="/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="/plugins/icons/flags/flags.css">
    <link rel="stylesheet" href="/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="/plugins/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/plugins/icons/feather/feather.css">
    <link rel="stylesheet" href="/plugins/simpleline/simple-line-icons.css">
    <link rel="stylesheet" href="/plugins/toastr/toatr.css"/>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/quagga"></script>
    <script type="text/javascript" src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/alertify.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/themes/default.min.css"/>
</head>

<style>


    .tab_content.active .productset {
        display: flex;
        flex-direction: column;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
        border-radius: 8px;
        overflow: hidden;
    }


    .productsetimg img {
        max-width: 100%;
        height: auto;
        border-bottom: 1px solid #f1f1f1;
    }


    .productsetcontent h3 {
        font-size: 18px;
        color: #333;
        margin: 0 0 10px;
    }

    .productsetcontent h4 {
        font-size: 16px;
        color: #666;
    }


    .productset h6 {
        position: absolute;
        top: 15px;
        left: 15px;
        background-color: rgba(0, 0, 0, 0.6);
        color: #fff;
        padding: 5px;
        border-radius: 3px;
    }
</style>
<STYLE>


    .flex-container > div {
        margin-right: 15px; /* Thêm khoảng cách giữa các item, nếu cần */
    }


    .form-control-sm label {
        margin-right: 10px; /* Thêm khoảng cách giữa label và combobox, nếu cần */
    }


    .flex-container > div {
        margin-right: 10px; /* Thêm khoảng cách giữa input và select, nếu cần */
    }
</STYLE>

<style>
    .alertify .ajs-message {
        background-color: black;
        color: #ffffff;
    }

    /* Thay đổi màu nền của tiêu đề */
    .alertify .ajs-header {
        background-color: coral;
        color: #ffffff;
    }

    /* Thay đổi màu nền của các nút */
    .alertify .ajs-buttons .ajs-ok {
        background-color: #2ecc71;
        color: #ffffff;
    }
</style>
<style>
    .custom-alert {
        position: fixed;
        top: 20px;
        right: 20px;
        width: auto;
        padding: 15px;
        background-color: #4caf50; /* Màu nền thông báo */
        color: white; /* Màu chữ */
        border-radius: 5px; /* Bo góc */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Đổ bóng */
        z-index: 9999; /* Đảm bảo thông báo ở trên cùng */
        transition: all 0.5s ease-in-out; /* Hiệu ứng chuyển động */
    }

    .custom-alert.show {
        opacity: 1;
        visibility: visible;
    }

    .custom-alert.hide {
        opacity: 0;
        visibility: hidden;
    }
</style>
<body>
<div class="main-wrapper">
    <div class="header">
        <ul class="nav user-menu">

            <li class="nav-item dropdown has-arrow flag-nav " style="margin-right: 30px;">
                <a href="/order"
                   style="height: 30px; width: 30px; background-color: #ff9f43; border-radius: 5px; margin-top: 13px;">
                    <i class="si si-refresh" style="color: #ffffff; margin-left: -10px;"></i>
                </a>
            </li>

            <li class="nav-item dropdown has-arrow main-drop">
                <a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
                        <span class="user-img"><img
                                th:src="@{'/images/imgsNhanVien/'+${session.shipperLogged.AnhNV}}"
                                alt="">
                        <span class="status online"></span></span>
                </a>
                <div class="dropdown-menu menu-drop-user">
                    <div class="profilename">
                        <div class="profileset">
                                <span class="user-img"><img
                                        th:src="@{'/images/imgsNhanVien/'+${session.shipperLogged.AnhNV}}"
                                        alt="">
                                    <span class="status online"></span></span>
                            <div class="profilesets">
                                <h6 th:text="${session.shipperLogged.hoTenNV}"></h6>
                                <h5 th:text="${session.shipperLogged.chucVu.tenCV}"></h5>
                            </div>
                        </div>
                        <hr class="m-0">


                        <a class="dropdown-item" href="/manage/change-password"><i class="me-2"
                                                                                   data-feather="settings"></i>Đổi mật
                            khẩu</a>
                        <hr class="m-0">
                        <a class="dropdown-item logout pb-0" href="/logout"><img src="/images/img/icons/log-out.svg"
                                                                                 class="me-2" alt="img">Đăng xuất</a>
                    </div>
                </div>
            </li>
        </ul>

        <div class="dropdown mobile-user-menu">
            <a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
               aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
            <div class="dropdown-menu dropdown-menu-right">

                <a class="dropdown-item" href="/manage/change-password">Cài đặt</a>
                <a class="dropdown-item" href="signin.html">Đăng xuất</a>
            </div>
        </div>
    </div>
</div>

<div class="">
    <div th:if="${messageLay}" class="alert alert-success custom-alert" role="alert">
        <span th:text="${messageLay}"></span>
    </div>
    <div th:if="${messageGiao}" class="alert alert-success custom-alert" role="alert">
        <span th:text="${messageGiao}"></span>
    </div>
    <div th:if="${messageHuy}" class="alert alert-success custom-alert" role="alert">
        <span th:text="${messageHuy}"></span>
    </div>
    <div class="content">
        <div class="page-header">
            <div class="page-title">
            </div>
        </div>
        <section class="comp-section">
            <div class="row">
                <div class="col-md-12">
                    <div class="card bg-white">

                        <div class="card-header" style="margin-top: 40px;">
                            <h4 style="font-weight: 700; font-size: 13pt">Quản lý đơn hàng</h4>
                        </div>

                        <div class="card-body">
                            <ul class="nav nav-tabs nav-tabs-solid nav-tabs-rounded nav-justified">
                                <li class="nav-item">
                                    <a th:class="${activeAll}"
                                       href="#solid-rounded-justified-tab1"
                                       data-bs-toggle="tab">Tổng quan</a>
                                </li>
                                <li class="nav-item">
                                    <a th:class="${activeVanChuyen}"
                                       href="#solid-rounded-justified-tab2"
                                       data-bs-toggle="tab">Xử lý đơn giao</a></li>
                                <li class="nav-item">
                                    <a th:class="${activeDone}"
                                       href="#solid-rounded-justified-tab3"
                                       data-bs-toggle="tab">Hoàn thành/Hủy</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div th:class="${tabpane1}" id="solid-rounded-justified-tab1">
                                    <div class="row">
                                        <div class="col-lg-4 col-sm-6 col-12">
                                            <div class="dash-widget">
                                                <div class="dash-widgetimg">
                                                    <span><img src="/images/img/icons/dash1.svg" alt="img"></span>
                                                </div>
                                                <div class="dash-widgetcontent">
                                                    <h5><span class="counters" th:data-count="${sumDHMuaHang}"
                                                              th:text="${sumDHMuaHang}"></span></h5>
                                                    <h6>Đơn hàng</h6>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-sm-6 col-12">
                                            <div class="dash-widget dash1">
                                                <div class="dash-widgetimg">
                                                            <span>
                                                                <svg style="height: 25px; width: 25px;"
                                                                     viewBox="0 0 24.00 24.00" id="Layer_1"
                                                                     data-name="Layer 1"
                                                                     xmlns="http://www.w3.org/2000/svg" fill="#28c76f"
                                                                     stroke="#28c76f">
                                                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
                                                                        id="SVGRepo_tracerCarrier"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round"></g>
                                                                <g id="SVGRepo_iconCarrier">
                                                                    <defs>
                                                                        <style>.cls-1 {
                                                                            fill: none;
                                                                            stroke: #28c76f;
                                                                            stroke-miterlimit: 10;
                                                                            stroke-width: 0.8879999999999999;
                                                                        }</style>
                                                                    </defs>
                                                                    <circle class="cls-1" cx="6.27" cy="19.64"
                                                                            r="1.91"></circle>
                                                                    <circle class="cls-1" cx="17.73" cy="19.64"
                                                                            r="1.91"></circle>
                                                                    <path class="cls-1"
                                                                          d="M19.64,19.64H22.5V13.91L21,7.71A1.9,1.9,0,0,0,19.1,6.27H15.82V19.64"></path>
                                                                    <polyline class="cls-1"
                                                                              points="8.18 19.64 15.82 19.64 15.82 14.86 1.5 14.86 1.5 19.64 4.36 19.64"></polyline>
                                                                    <rect class="cls-1" x="1.5" y="2.45" width="14.32"
                                                                          height="12.41"></rect>
                                                                    <polyline class="cls-1"
                                                                              points="15.82 12 17.73 12 19.64 13.91 22.5 13.91"></polyline>
                                                                </g>
                                                            </svg>
                                                        </span>
                                                </div>
                                                <div class="dash-widgetcontent">
                                                    <h5><span class="counters" th:data-count="${dangGiao}"
                                                              th:text="${dangGiao}"></span></h5>
                                                    <h6>Đang giao</h6>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-sm-6 col-12">
                                            <div class="dash-widget dash1">
                                                <div class="dash-widgetimg">
                                                            <span>
                                                                <svg style="height: 25px; width: 25px;"
                                                                     viewBox="0 0 24.00 24.00" id="Layer_1"
                                                                     data-name="Layer 1"
                                                                     xmlns="http://www.w3.org/2000/svg" fill="#28c76f"
                                                                     stroke="#28c76f">
                                                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
                                                                        id="SVGRepo_tracerCarrier"
                                                                        stroke-linecap="round"
                                                                        stroke-linejoin="round"></g>
                                                                <g id="SVGRepo_iconCarrier">
                                                                    <defs>
                                                                        <style>.cls-1 {
                                                                            fill: none;
                                                                            stroke: #28c76f;
                                                                            stroke-miterlimit: 10;
                                                                            stroke-width: 0.8879999999999999;
                                                                        }</style>
                                                                    </defs>
                                                                    <circle class="cls-1" cx="6.27" cy="19.64"
                                                                            r="1.91"></circle>
                                                                    <circle class="cls-1" cx="17.73" cy="19.64"
                                                                            r="1.91"></circle>
                                                                    <path class="cls-1"
                                                                          d="M19.64,19.64H22.5V13.91L21,7.71A1.9,1.9,0,0,0,19.1,6.27H15.82V19.64"></path>
                                                                    <polyline class="cls-1"
                                                                              points="8.18 19.64 15.82 19.64 15.82 14.86 1.5 14.86 1.5 19.64 4.36 19.64"></polyline>
                                                                    <rect class="cls-1" x="1.5" y="2.45" width="14.32"
                                                                          height="12.41"></rect>
                                                                    <polyline class="cls-1"
                                                                              points="15.82 12 17.73 12 19.64 13.91 22.5 13.91"></polyline>
                                                                </g>
                                                            </svg>
                                                        </span>
                                                </div>
                                                <div class="dash-widgetcontent">
                                                    <h5><span class="counters" th:data-count="${choLayHang}"
                                                              th:text="${choLayHang}"></span></h5>
                                                    <h6>Chờ lấy hang</h6>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-sm-6 col-12">
                                            <div class="dash-widget dash2">
                                                <div class="dash-widgetimg">
                                                            <span>
                                                                <svg width="25px" height="25px" viewBox="0 -0.5 21 21"
                                                                     version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                                     xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                     fill="#00cfe8" stroke="#00cfe8">
                                                                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                                                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round"
                                                                       stroke-linejoin="round"></g>
                                                                    <g id="SVGRepo_iconCarrier">
                                                                        <title>done [#1477]</title>
                                                                            <desc>Created with Sketch.</desc>
                                                                        <defs> </defs>
                                                                            <g id="Page-1"
                                                                               stroke-width="0.00021000000000000004"
                                                                               fill="none" fill-rule="evenodd">
                                                                            <g id="Dribbble-Light-Preview"
                                                                               transform="translate(-179.000000, -400.000000)"
                                                                               fill="#00cfe8">
                                                                                    <g id="icons"
                                                                                       transform="translate(56.000000, 160.000000)">
                                                                                    <path d="M141.9,243 C141.9,242.448 141.4296,242 140.85,242 L126.15,242 C125.5704,242 125.1,242.448 125.1,243 L125.1,257 C125.1,257.552 125.5704,258 126.15,258 L140.85,258 C141.4296,258 141.9,257.552 141.9,257 L141.9,243 Z M144,242 L144,258 C144,259.105 143.06025,260 141.9,260 L125.1,260 C123.93975,260 123,259.105 123,258 L123,242 C123,240.895 123.93975,240 125.1,240 L141.9,240 C143.06025,240 144,240.895 144,242 L144,242 Z M137.72205,247.015 C138.1326,247.405 138.1326,248.039 137.72205,248.429 L133.63965,252.317 C133.0233,252.903 132.0258,252.903 131.40945,252.317 L129.5541,250.55 C129.1446,250.16 129.1446,249.527 129.5541,249.136 C129.96465,248.746 130.6293,248.746 131.0388,249.136 L131.7801,249.842 C132.19065,250.233 132.8574,250.233 133.269,249.842 L136.23735,247.015 C136.64685,246.624 137.31255,246.624 137.72205,247.015 L137.72205,247.015 Z"
                                                                                          id="done-[#1477]"> </path>
                                                                                </g>
                                                                                </g>
                                                                            </g>
                                                                        </g>
                                                                </svg>
                                                            </span>
                                                </div>
                                                <div class="dash-widgetcontent">
                                                    <h5><span class="counters" th:data-count="${giaoThanhCong}"
                                                              th:text="${giaoThanhCong}"></span></h5>
                                                    <h6>Giao thành công</h6>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-sm-6 col-12">
                                            <div class="dash-widget dash2">
                                                <div class="dash-widgetimg">
    <span>
        <svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858Z"
                  fill="#00cfe8"/>
        </svg>
    </span>
                                                </div>
                                                <div class="dash-widgetcontent">
                                                    <h5><span class="counters" th:data-count="${huy}"
                                                              th:text="${huy}"></span></h5>
                                                    <h6>Giao thất bại</h6>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="vertical-scroll scroll-demo">
                                            <table class="table  datanew ">
                                                <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Mã Hóa Đơn</th>
                                                    <th>Thời gian tạo</th>
                                                    f
                                                    <th>Thanh Toán</th>
                                                    <th>Trạng thái</th>
                                                    <th>Khách hàng</th>
                                                    <th>Tổng SP</th>
                                                    <th>Tổng tiền</th>
                                                    <th>Hành động</th>

                                                </tr>
                                                </thead>
                                                <tbody>
                                                <th:block th:each="bill, i: ${hoaDonDGList}">
                                                    <tr th:unless="${bill.trangThai == 0 or bill.trangThai == 1  or bill.trangThai == 6}">

                                                        <td th:text="${i.index}"></td>
                                                        <td th:text="${bill.maHD}"></td>
                                                        <td th:text="${#dates.format(bill.tgTao, 'HH:mm yyyy-MM-dd')}"></td>

                                                        <!--                                                         Hóa đơn thường begin-->
                                                        <td th:if="${bill.trangThai == 2 }">Chưa Thanh toán</td>
                                                        <td th:if="${bill.trangThai == 3 }">Chưa Thanh toán</td>
                                                        <td th:if="${bill.trangThai == 5 }">Chưa Thanh toán</td>
                                                        <td th:if="${bill.trangThai == 4 }">Đã Thanh toán</td>


                                                        <td th:if="${bill.trangThai == 2 }">Chờ lấy hàng</td>
                                                        <td th:if="${bill.trangThai == 3  }">Chờ giao hàng</td>
                                                        <td th:if="${bill.trangThai == 4 }" style="color: #0875eb;">
                                                            Thành công
                                                        </td>
                                                        <td th:if="${bill.trangThai == 5 }" style="color: #e01627;">Đã
                                                            hủy
                                                        </td>
                                                        <!--                                                         Hóa đơn thường end-->

                                                        <td th:text="${bill.giaoHang.tenNguoiNhan}"></td>
                                                        <td th:text="${bill.tongSP}"></td>
                                                        <td th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>
                                                        <th>
                                                            <i class="fe fe-eye" th:data-bs-toggle="modal"
                                                               th:data-bs-target="'#modalAll' + ${bill.idHD}"
                                                               style="cursor: pointer; margin: 0 10px 0 20px; color: #ff9f43;"></i>
                                                            <a th:href="@{'http://localhost:8080/order/bill/print/' + ${bill.idHD}}"
                                                               onclick="window.open(this.href, '_blank'); return false;">
                                                                <i class="fe fe-printer" data-bs-toggle="tooltip"
                                                                   title="" style="cursor: pointer; color: #ff9f43;"
                                                                   data-bs-original-title="In hóa đơn"
                                                                   aria-label="fe fe-printer"></i>
                                                            </a>

                                                        </th>
                                                    </tr>
                                                </th:block>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div th:class="${tabpane2}" id="solid-rounded-justified-tab2">
                                    <div th:if="${showHTGH}" class="row" th:object="${HoaDonVanChuyen}"
                                         style="border: 0.5px solid #ff9f43; margin: 50px 0 50px 0">
                                        <div class="col-md-8">

                                            <form th:action="'/order/delivery/update/' + ${HoaDonVanChuyen.idHD}"
                                                  method="post">
                                                <div class="row" style="padding: 10px;">
                                                    <div class="col-lg-4 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Mã đơn hàng :</label>
                                                            <p style="font-size: 13pt; font-weight: 700;"
                                                               th:text="${HoaDonVanChuyen.maHD}"></p>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-2 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Số tiền :</label>
                                                            <p style="font-size: 11pt; font-weight: 600;"
                                                               th:text="'₫'+${#numbers.formatDecimal(HoaDonVanChuyen.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></p>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Thanh toán :</label>
                                                            <p th:if="${HoaDonVanChuyen.loaiHD == 1 }"
                                                               style="font-size: 11pt; font-weight: 600;">Thanh toán
                                                                nhận hàng</p>
                                                            <p th:if="${HoaDonVanChuyen.loaiHD == 0 }"
                                                               style="font-size: 11pt; font-weight: 600;">Đã thanh
                                                                toán</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Thời gian giao dự kiến :</label>

                                                                   <p style="font-size: 11pt; font-weight: 600;" th:text="${#dates.format(HoaDonVanChuyen.getTgNhanDK(), 'HH:mm yyyy-MM-dd')}"></p>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Địa chỉ nhận:</label>
                                                            <p style="font-size: 11pt; font-weight: 600;"
                                                               th:text="${HoaDonVanChuyen.giaoHang.diaChiNguoiNhan}"></p>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Tên đơn vị vận chuyển</label>
                                                            <p th:if="${HoaDonVanChuyen.giaoHang.tenDVVC != null}"
                                                               style="font-size: 11pt; font-weight: 600;"
                                                               th:text="${HoaDonVanChuyen.giaoHang.tenDVVC}"></p>
                                                            <select th:if="${HoaDonVanChuyen.giaoHang.tenDVVC == null}"
                                                                    id="deliveryOptions" class="form-control"
                                                                    name="donViVanChuyen">
                                                                <option value="ghn" selected>Giao hàng TeeZy</option>

                                                            </select>
                                                        </div>
                                                    </div>
<!--                                                    <div class="col-lg-4 col-sm-12 col-12">-->
<!--                                                        <div class="form-group">-->
<!--                                                            <label>Mã vận đơn:</label>-->
<!--                                                            <p th:if="${HoaDonVanChuyen.giaoHang.tenDVVC != null}"-->
<!--                                                               style="font-size: 11pt; font-weight: 600;"-->
<!--                                                               th:text="${HoaDonVanChuyen.giaoHang.maVanDon}"></p>-->
<!--                                                            <input th:if="${HoaDonVanChuyen.giaoHang.tenDVVC == null}"-->
<!--                                                                   name="maVanDonGH" id="maVanDon" class="form-control"-->
<!--                                                                   type="text">-->
<!--                                                        </div>-->
<!--                                                    </div>-->

                                                    <div class="col-lg-4 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label>Trạng thái đơn hàng </label>
                                                            <select name="trangThaiGiaoHang" class="select" style="width: 220px; height:40px; border: 1px solid rgba(145, 158, 171, .32); border-radius: 5px;
                                                                font-weight: 500; font-size: 14px; color: #637381; padding: 10px 15px;  ">
                                                                <option th:if="${HoaDonVanChuyen.giaoHang.tenDVVC == null}"
                                                                        value="daGuiHang">Đã lấy/gửi hàng
                                                                </option>
                                                                <option th:if="${HoaDonVanChuyen.giaoHang.tenDVVC != null}"
                                                                        value="dangGiao">Đang giao
                                                                </option>
                                                                <option th:if="${HoaDonVanChuyen.giaoHang.tenDVVC != null}"
                                                                        value="thanhCong">Giao thành công
                                                                </option>
                                                                <option th:if="${HoaDonVanChuyen.giaoHang.tenDVVC != null}"
                                                                        value="thatBai">Giao thất bại
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-12 col-sm-12 col-12">
                                                        <div class="form-group">
                                                            <label style="font-size: 11pt; font-weight: 600;">Mô tả
                                                                :</label>
                                                            <textarea name="moTa" style="height: 80px;" cols="1"
                                                                      rows="1"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <button style="height: 50.33px;" type="submit"
                                                                class="btn btn-primary" onclick="luuThayDoi()">Lưu thay
                                                            đổi
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>

                                        </div>
                                        <div class="col-md-4" style=" border-left: 0.5 px solid black ;">
                                            <p style="font-size: 14pt; font-weight: 700; margin-top: 20px; text-align: center;">
                                                Vị trí đơn hàng</p>

                                            <th:block th:each="x: ${giaoHangList}">
                                                <p th:if="${x.trangThai == 2}" style="color: red; margin-top: 30px;"
                                                   th:text="${#dates.format(x.thoiGian, 'HH:mm yyyy-MM-dd')}"></p>
                                                <p th:if="${x.trangThai == 2}" style="color: red;"
                                                   th:text="${x.viTri}"></p>

                                                <p th:if="${x.trangThai == 1}" style="color: blue; margin-top: 30px;"
                                                   th:text="${#dates.format(x.thoiGian, 'HH:mm yyyy-MM-dd')}"></p>
                                                <p th:if="${x.trangThai == 1}" style="color: blue;"
                                                   th:text="${x.viTri}"></p>

                                                <p th:if="${x.trangThai == 0}" style=" margin-top: 30px;"
                                                   th:text="${#dates.format(x.thoiGian, 'HH:mm yyyy-MM-dd')}"></p>
                                                <p th:if="${x.trangThai == 0}" th:text="${x.viTri}"></p>
                                            </th:block>

                                        </div>
                                    </div>

                                    <div class="tab-content">
                                        <div class="tab-pane show active" id="solid-rounded-justified-tab4">
                                            <div style="border: 0.5px solid #ff9f43; padding: 10px;" class="row">
                                                <div class="vertical-scroll scroll-demo">
                                                    <table class="table  datanew ">
                                                        <thead>
                                                        <tr>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                STT
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Mã Hóa Đơn
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Thời gian tạo
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Trạng thái
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Khách hàng
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Tổng SP
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Tổng tiền
                                                            </th>
                                                            <th style="position: sticky; top: 0;background-color: #209de3; color: white;">
                                                                Hành động
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <th:block th:each="x, i: ${hoaDonDGList}">
                                                            <tr th:unless="${x.trangThai == 1 or x.trangThai == 4 or x.trangThai == 5  or x.trangThai == 6}">
                                                                <td th:text="${i.index}"></td>
                                                                <td th:text="${x.maHD}"></td>
                                                                <td th:text="${x.tgTao}"></td>
                                                                <td th:if="${x.giaoHang.tenDVVC == null}">Chưa lấy/gửi
                                                                    hàng
                                                                </td>
                                                                <td th:if="${x.giaoHang.tenDVVC != null}">Đang giao</td>
                                                                <td th:text="${x.giaoHang.tenNguoiNhan}"></td>
                                                                <td th:text="${x.tongSP}"></td>
                                                                <td th:text="'₫'+${#numbers.formatDecimal(x.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>
                                                                <th>
                                                                    <a th:href="@{'/order/delivery/update/' + ${x.idHD}}">
                                                                        <i class="fe fe-edit-3"
                                                                           data-bs-original-title="Cập nhật giao hàng"
                                                                           data-bs-toggle="tooltip" title=""
                                                                           style="cursor: pointer; margin-left: 20px; color: #ff9f43;"></i>
                                                                    </a>
                                                                </th>
                                                            </tr>
                                                        </th:block>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div th:class="${tabpane3}" id="solid-rounded-justified-tab3">
                                    <div class="row">
                                        <div class="vertical-scroll scroll-demo">
                                            <table class="table  datanew ">
                                                <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Mã Hóa Đơn</th>
                                                    <th>Thời gian tạo</th>
                                                    <th>Trạng thái</th>
                                                    <th>Khách hàng</th>
                                                    <th>Tổng SP</th>
                                                    <th>Tổng tiền</th>
                                                    <th>Thời gian thành công/hủy</th>

                                                </tr>
                                                </thead>
                                                <tbody>
                                                <th:block th:each="x, i: ${allHoaDonList}">
                                                    <tr th:unless="${x.trangThai == 1 or x.trangThai == 2  or x.trangThai == 6}">
                                                        <td th:text="${i.index}"></td>
                                                        <td th:text="${x.maHD}"></td>
                                                        <td th:text="${x.tgTao}"></td>

                                                        <td th:if="${x.trangThai == 4 }" style="color: #219edf;">Thành
                                                            công
                                                        </td>
                                                        <td th:if="${x.trangThai == 5 and x.giaoHang.trangThai == 2}"
                                                            style="color: #fe2857;">Hủy đơn
                                                        </td>
                                                        <td th:text="${x.giaoHang.tenNguoiNhan}"></td>
                                                        <td th:text="${x.tongSP}"></td>

                                                        <td th:text="'₫'+${#numbers.formatDecimal(x.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>

                                                        <td th:text="${#dates.format(x.giaoHang.tgNhan, 'HH:mm yyyy-MM-dd')}"
                                                            th:if="${x.trangThai == 4 }" style="color: #0875eb;"></td>
                                                        <td th:text="${#dates.format(x.giaoHang.tgHuy, 'HH:mm yyyy-MM-dd')}"
                                                            th:if="${x.trangThai == 5 }" style="color: #e01627;"></td>
                                                    </tr>
                                                </th:block>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<section>
    <!-- Modal All giao hàng Begin -->
    <th:block th:each="x: ${allHoaDonList}">
        <div class="modal fade" th:id="'modalAll' + ${x.idHD}" tabindex="-1" aria-labelledby="create"
             aria-hidden="true">
            <div id='parent' class="modal-dialog modal-lg modal-dialog-centered" role="document" style="width: 900px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Chi tiết đơn hàng</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Mã đơn hàng :</label>
                                    <p style="font-size: 13pt; font-weight: 700;" th:text="${x.maHD}"></p>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số tiền :</label>
                                    <p th:text="'₫'+${#numbers.formatDecimal(x.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"
                                       style="font-size: 11pt; font-weight: 6600;"></p>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số lượng SP :</label>
                                    <p style="font-size: 12pt; font-weight: 700;" th:text="${x.tongSP}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian tạo :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${#dates.format(x.tgTao, 'HH:mm yyyy-MM-dd')}"></p>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="font-size: 11pt; font-weight: 600;">Mã Giao Hang :</label>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="font-size: 11pt; font-weight: 600;">Thời gian</label>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="font-size: 11pt; font-weight: 600;">Vị trí</label>
                                </div>
                            </div>
                            <th:block th:each="xx: ${x.giaoHang.viTriDonHangs}">
                                <div class="col-lg-3 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${xx.giaoHang.maGiaoHang}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${#dates.format(xx.thoiGian, 'HH:mm yyyy-MM-dd')}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-sm-12 col-12">
                                    <div class="form-group">
                                        <label th:text="${xx.viTri}"></label>
                                    </div>
                                </div>
                            </th:block>

                            <div class="col-lg-12">
                                <a class="btn btn-cancel" data-bs-dismiss="modal">OK</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
    <!-- Modal All Purchase End -->

</section>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<script src="/js/jquery-3.6.0.min.js"></script>

<script src="/js/feather.min.js"></script>

<script src="/js/jquery.slimscroll.min.js"></script>

<script src="/js/jquery.dataTables.min.js"></script>
<script src="/js/dataTables.bootstrap4.min.js"></script>

<script src="/js/bootstrap.bundle.min.js"></script>

<script src="/js/script.js"></script>


<script>
    function luuThayDoi() {
        var selectedOption = document.getElementById("deliveryOptions").value;
        var maVanDon = document.getElementById("maVanDon").value;
        if (maVanDon === "") {
            alert("Bạn cần nhập mã vận đơn khi chọn đơn vị vận chuyển .");
            event.preventDefault()
        }

        // Thực hiện các thay đổi khác hoặc gửi dữ liệu đi nếu cần
        // ...
        // ...
    }
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const alert = document.querySelector('.custom-alert');
        if (alert) {
            setTimeout(() => {
                alert.classList.add('hide');
            }, 5000); // 5 giây
        }
    });
</script>

</body>
</html>