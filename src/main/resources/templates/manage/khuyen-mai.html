<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="POS - Bootstrap Admin Template">
    <meta name="keywords"
          content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
    <meta name="author" content="Dreamguys - Bootstrap Admin Template">
    <meta name="robots" content="noindex, nofollow">
    <title>Sneaker Shop - Admin</title>

    <link rel="shortcut icon" type="image/x-icon" href="/images/img/icon.png">
    <link rel="stylesheet" href="/plugins/icons/flags/flags.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <link rel="stylesheet" href="/css/animate.css">

    <link rel="stylesheet" href="/plugins/select2/css/select2.min.css">

    <link rel="stylesheet" href="/css/dataTables.bootstrap4.min.css">

    <link rel="stylesheet" href="/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="/plugins/fontawesome/css/all.min.css">

    <link rel="stylesheet" href="/plugins/toastr/toatr.css"/>

    <link rel="stylesheet" href="/css/style.css">
    <!-- Thêm link thư viện Alertify -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/alertify.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/themes/default.min.css"/>
    <style>
        .alertify .ajs-message {
            background-color: black;
            color: #ffffff;
        }

        /* Thay đổi màu nền của tiêu đề */
        .alertify .ajs-header {
            background-color: coral;
            color: #ffffff;
        }

        /* Thay đổi màu nền của các nút */
        .alertify .ajs-buttons .ajs-ok {
            background-color: #2ecc71;
            color: #ffffff;
        }
    </style>
    <style>
        .color-box {
            width: 40px; /* Độ rộng của hộp màu */
            height: 40px; /* Chiều cao của hộp màu */
            display: inline-block; /* Hiển thị như một hộp chữ nằm cạnh nhau */
            border: 1px solid #000; /* Viền xung quanh hộp màu */
            margin: 0 5px; /* Khoảng cách giữa các hộp màu */
            border-radius: 50%;
        }
    </style>
    <style>
        /* Định dạng lớp CSS để làm cho input to hơn */
        .large-input {
            /*width: 230px; !* Điều chỉnh kích thước theo nhu cầu của bạn *!*/
            /*height: 40px; !* Điều chỉnh kích thước theo nhu cầu của bạn *!*/
            border: none;
        }
    </style>
</head>
<body class="mini-sidebar">
<div th:replace="~{manage/activities :: main}"></div>
<div class="main-wrapper">
    <div class="page-wrapper">
        <div class="content">
            <div class="page-header">
                <div class="page-title">
                    <h4>Danh sách Khuyễn mãi</h4>
                    <h6>Quản lý Khuyễn mãi</h6>
                </div>

                <div class="page-btn">
                    <button class="btn btn-added" id="show-form-button">
                        <img src="" class="me-1">Thêm Khuyến mãi
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="hidden-form" style="display: none">
                        <form method="post" th:object="${addKhuyenMai}" th:action="@{/manage/khuyen-mai/add}">
                            <div class="row">
                                <div class="col-lg-5 col-12">
                                    <div class="form-group">
                                        <label>Mã khuyễn mãi</label>
                                        <input type="text" id="maKM" th:field="*{maKM}" class="form-control">
                                    </div>
                                </div>

                                <div class="col-lg-5 col-12">
                                    <div class="form-group">
                                        <label>Tên khuyễn mãi</label>
                                        <input type="text" id="tenKM" th:field="*{tenKM}" class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-5 col-12">
                                    <div class="form-group">
                                        <label>Ngày bắt đầu</label>
                                        <input type="date" id="ngayBatDau" th:field="*{tgBatDau}" class="form-control">
                                    </div>
                                </div>

                                <div class="col-lg-5 col-12">
                                    <div class="form-group">
                                        <label>Ngày kết thúc</label>
                                        <input type="date" id="ngayKetThuc" th:field="*{tgKetThuc}"
                                               class="form-control">
                                    </div>
                                </div>

                                <div class="collg-12">
                                    <button type="submit" class="btn btn-submit me-2">Thêm</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="table-top">
                        <div class="search-set">
                            <div class="search-path">
                                <a class="btn btn-filter" id="filter_search">
                                    <img src="/images/img/icons/filter.svg" alt="img">
                                    <span><img src="/images/img/icons/closes.svg" alt="img"></span>
                                </a>
                            </div>

                            <div class="search-input">
                                <a class="btn btn-searchset">
                                    <img src="/images/img/icons/search-white.svg" alt="img">
                                </a>
                            </div>
                        </div>
                    </div>

                    <form method="get" th:action="@{/manage/khuyenMai/filter}">
                        <div class="card" id="filter_inputs">
                            <div class="card-body pb-0">
                                <div class="row">
                                    <div class="col-lg-2 col-sm-6 col-12">
                                        <div class="form-group">
                                            <select class="select" name="trangThai">
                                                <option value="">Trạng thái</option>
                                                <option value="1">Đang diễn ra</option>
                                                <option value="0">Đã kết thúc</option>
                                                <option value="2">Chưa diễn ra</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-lg-1 col-sm-6 col-12 ms-auto">
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-filters ms-auto">
                                                <img src="/images/img/icons/search-whites.svg" alt="img">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <div class="table-responsive">
                        <table class="table datanew" id="data-table">
                            <thead>
                            <tr>
                                <td style="background-color: #f2a51d; color: whitesmoke">Mã KM</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Tên KM</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Số tiền giảm</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Điều kiện giảm</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Số lượng</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Số lượng đã dùng</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Trạng thái</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Ngày bắt đầu</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Ngày kết thúc</td>
                                <td style="background-color: #f2a51d; color: whitesmoke">Action</td>
                            </tr>
                            </thead>

                            <tbody>
                            <tr th:each="items : ${khuyenMai}">
                                <td th:text="${items.maKM}"></td>
                                <td th:text="${items.tenKM}"></td>
                                <td th:text="${items.giaTienGiam}"></td>
                                <td th:text="${items.dieuKienKMBill}"></td>
                                <td th:text="${items.soLuong}"></td>
                                <td th:text="${items.soLuongDaDung}"></td>
                                <td>
                                   <span th:if="${items.trangThai == 1}" class="badges bg-lightgreen">
                                       Đang diễn ra
                                   </span>
                                    <span th:if="${items.trangThai == 2}" class="badges bg-lightpurple">
                                       Chưa diễn ra
                                   </span>
                                    <span th:if="${items.trangThai == 0}" class="badges bg-lightred bg-opacity-50">
                                       Đã kết thúc
                                   </span>
                                </td>
                                <td th:text="${items.tgBatDau}"></td>
                                <td th:text="${items.tgKetThuc}"></td>
                                <td>
                                    <a class="me-3" th:href="@{'/manage/khuyen-mai/detail/' + ${items.idKM}}">
                                        <img src="/images/img/icons/edit.svg" alt="img">
                                    </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="pt-5">
                        <div class="border border-dark border-opacity-50 p-5 rounded-3">
                            <div class="row">
                                <div class="col-4 border-end border-black">
                                    <div>
                                        <h4 class="text-uppercase text-center">danh sách khuyễn mãi</h4>
                                        <label for="promotion-select">Chọn khuyến mãi</label>
                                        <select id="promotion-select" name="promotionId" class="form-select">
                                            <option value=""></option>
                                            <th:block th:each="promotion : ${khuyenMai}">
                                                <option th:value="${promotion.idKM}"
                                                        th:text="${promotion.tenKM}">
                                                </option>
                                            </th:block>
                                        </select>
                                    </div>

                                    <div class="d-flex justify-content-center">
                                        <a class="btn btn-outline-danger mt-2 w-50">Gửi</a>
                                    </div>
                                </div>

                                <div class="col-8">
                                    <h4 class="text-uppercase text-center">danh sách khách hàng</h4>
                                    <table class="table">
                                        <thead>
                                        <tr class="table-primary">
                                            <td><input type="checkbox"/></td>
                                            <td>Mã KH</td>
                                            <td>Tên KH</td>
                                            <td>SDT KH</td>
                                            <td>Email KH</td>
                                        </tr>
                                        </thead>

                                        <tbody>
                                        <tr th:each="items1 : ${khachHang}">
                                            <td><input type="checkbox"/></td>
                                            <td th:text="${items1.maKH}"></td>
                                            <td th:text="${items1.hoTenKH}"></td>
                                            <td th:text="${items1.sdtKH}"></td>
                                            <td th:text="${items1.emailKH}"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/jquery-3.6.0.min.js"></script>

<script src="/js/feather.min.js"></script>

<script src="/js/jquery.slimscroll.min.js"></script>

<script src="/js/jquery.dataTables.min.js"></script>
<script src="/js/dataTables.bootstrap4.min.js"></script>

<script src="/js/bootstrap.bundle.min.js"></script>

<script src="/plugins/select2/js/select2.min.js"></script>

<script src="/plugins/sweetalert/sweetalert2.all.min.js"></script>
<script src="/plugins/sweetalert/sweetalerts.min.js"></script>

<script src="/js/script.js"></script>
<script src="/plugins/alertify/custom-alertify.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/alertify.min.js"></script>

<script>
    //Mở form thêm
    document.getElementById("show-form-button").addEventListener("click", function () {
        var moForm = document.querySelector(".hidden-form");
        var anForm = document.querySelector(".form-hidden-2");
        if (moForm.style.display === "none" || moForm.style.display === "" || anForm.style.display === "block") {
            $('.hidden-form').slideToggle("slow");
            moForm.style.display = "block"; //hiện thị form
            anForm.style.display = "none";
        } else {
            moForm.style.display = "none"; //ẩn form
        }
    });
</script>
</body>
</html>