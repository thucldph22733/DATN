<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="POS - Bootstrap Admin Template">
    <meta name="keywords"
          content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
    <meta name="author" content="Dreamguys - Bootstrap Admin Template">
    <meta name="robots" content="noindex, nofollow">
    <title>TeeZy Shop - Admin</title>

    <link rel="shortcut icon" type="image/x-icon" href="/images/img/icon.png">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/plugins/select2/css/select2.min.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="/plugins/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/plugins/scrollbar/scroll.min.css">
    <link rel="stylesheet" href="/plugins/icons/feather/feather.css">
    <link rel="stylesheet" href="/plugins/icons/flags/flags.css">
    <link rel="stylesheet" href="/plugins/simpleline/simple-line-icons.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<style>
    /* CSS để điều chỉnh vị trí của thông báo */
    .invalid-feedback {
        position: absolute;
        top: 83px;
        z-index: 1050;
        display: none;
        width: 250px; /* Điều chỉnh độ rộng của thông báo */
        text-align: center;
        text-align: center;
        background-color: #dc3545; /* Màu nền */
        color: white; /* Màu chữ */
        padding: 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
    .custom-alert {
        position: fixed;
        top: 20px;
        right: 20px;
        width: auto;
        padding: 15px;
        background-color: #4caf50; /* Màu nền thông báo */
        color: white; /* Màu chữ */
        border-radius: 5px; /* Bo góc */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Đổ bóng */
        z-index: 9999; /* Đảm bảo thông báo ở trên cùng */
        transition: all 0.5s ease-in-out; /* Hiệu ứng chuyển động */
    }

    .custom-alert.show {
        opacity: 1;
        visibility: visible;
    }

    .custom-alert.hide {
        opacity: 0;
        visibility: hidden;
    }
</style>
<body class="mini-sidebar">
<div th:fragment="main">

    <!--    <div th:if="${reLoadPage}" id="global-loader">-->
    <!--        <div class="whirly-loader"></div>-->
    <!--    </div>-->


    <div class="main-wrapper">
        <div class="header">
            <div class="header-left active">
                <a href="/manage" class="logo">
                    <img src="/images/img/logo.png" alt="">
                </a>
                <a href="/manage" class="logo-small">
                    <img src="/images/img/logo.png" alt="">
                </a>
                <a id="toggle_btn" href="javascript:void(0);">
                </a>
            </div>

            <a id="mobile_btn" class="mobile_btn" href="#sidebar">
            <span class="bar-icon">
            <span></span>
            <span></span>
            <span></span>
            </span>
            </a>

            <ul class="nav user-menu">

                <li class="nav-item dropdown has-arrow flag-nav " style="margin-right: 30px;">
                    <a href="/manage/bill/online"
                       style="height: 30px; width: 30px; background-color: #ff9f43; border-radius: 5px; margin-top: 13px;">
                        <i class="si si-refresh" style="color: #ffffff; margin-left: -10px;"></i>
                    </a>
                </li>


                <li class="nav-item dropdown has-arrow main-drop">
                    <a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
                                                                    <span class="user-img"><img
                                                                            th:src="@{'/images/imgsNhanVien/'+${session.managerLogged.AnhNV}}"
                                                                            alt="">
                        <span class="status online"></span></span>
                    </a>
                    <div class="dropdown-menu menu-drop-user">
                        <div class="profilename">
                            <div class="profileset">
                                                                                    <span class="user-img"><img
                                                                                            th:src="@{'/images/imgsNhanVien/'+${session.managerLogged.AnhNV}}"
                                                                                            alt="">
                                                                                    <span class="status online"></span></span>
                                <div class="profilesets">
                                    <h6 th:text="${session.managerLogged.hoTenNV}"></h6>
                                    <h5 th:text="${session.managerLogged.chucVu.tenCV}"></h5>
                                </div>
                            </div>
                            <hr class="m-0">
                            <a class="dropdown-item" href="/ban-hang/hien-thi">Bán hàng tại quầy</a>
                            <a class="dropdown-item" href="/order/">Vận chuyển</a>
                            <a class="dropdown-item" href="/manage/change-password"><i class="me-2"
                                                                                       data-feather="settings"></i>Change
                                passwoord</a>
                            <hr class="m-0">
                            <a class="dropdown-item logout pb-0" href="/logout"><img src="/images/img/icons/log-out.svg"
                                                                                     class="me-2" alt="img">Logout</a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="dropdown mobile-user-menu">
            <a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
               aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
            <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item" href="/ban-hang/hien-thi">Bán hàng tại quầy</a>
                <a class="dropdown-item" href="/order/">Vận chuyển</a>
                <a class="dropdown-item" href="profile.html">Thông tin cá nhân</a>
                <a class="dropdown-item" href="/manage/change-password">Cài đặt</a>
                <a class="dropdown-item" href="signin.html">Đăng xuất</a>
            </div>
        </div>
        <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul>
                        <li>
                            <a href="/manage/" data-link="link1" onclick="setActiveLink()">
                                <img src="/images/iconlogo.png" alt="img">
                                <span>Trang chủ nè</span>
                            </a>
                        </li>
                        <li>
                            <a href="/manage/thongke">
                                <img src="/images/img/icons/dashboard.svg" alt="img">
                                <span> Thống Kê</span>
                            </a>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);"><img src="/images/img/icons/product.svg" alt="img">
                                <span> Quản lý Giày</span>
                                <span class="menu-arrow"></span></a>
                            <ul>
                                <li><a href="/manage/chat-lieu" data-link="link3">Chất Liệu</a></li>
                                <li><a href="/manage/giay" data-link="link4">Giày</a></li>
                                <li><a href="/manage/hang">Hãng</a></li>
                                <li><a href="/manage/hinh-anh">Hình Ảnh</a></li>
                                <li><a href="/manage/mau-sac">Màu Sắc</a></li>
                                <input id="mauSac" th:value="${active}">
                                <li><a href="/manage/size">Size</a></li>
                                <li><a href="/manage/test">Test</a></li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);"><img src="/images/img/icons/expense1.svg" alt="img"><span> Quản Lý Hóa Đơn</span>
                                <span class="menu-arrow"></span></a>
                            <ul>
                                <li><a href="/manage/bill/offline">Hóa đơn tại quầy</a></li>
                                <li><a href="/manage/bill/online">Quản lý hóa đơn online</a></li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);"><img src="/images/img/icons/users1.svg" alt="img"><span> Quản Lý Khách Hàng</span>
                                <span class="menu-arrow"></span></a>
                            <ul>
                                <li><a href="/manage/khach-hang">Khách Hàng</a></li>
                                <li><a href="/manage/dia-chi">Địa Chỉ </a></li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);"><img src="/images/img/icons/purchase1.svg" alt="img"><span> Lịch sử thanh toán</span>
                                <span class="menu-arrow"></span></a>
                            <ul>
                                <li><a href="/manage/history/delivery">Thanh toán tiền mặt</a></li>
                                <li><a href="/manage/history/pay">Thanh toán chuyển khoản </a></li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);"><img src="/images/img/icons/users1.svg" alt="img"><span> Quản Lý Nhân Viên</span>
                                <span class="menu-arrow"></span></a>
                            <ul>
                                <li><a href="/manage/chuc-vu">Chức Vụ</a></li>
                                <li><a href="/manage/nhan-vien">Nhân Viên</a></li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <img src="/images/img/icons/transfer1.svg" alt="img"/>
                                <span>Quản lý Khuyến Mãi</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="/manage/voucher-bill">Khuyến Mãi Hóa Đơn</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="/manage/giao-hang"><i data-feather="layers"></i><span> Quản lý giao hàng</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--CODE TỪ DƯỚI NÀY-->
    <div th:if="${message}" class="alert alert-success custom-alert" role="alert">
        <span th:text="${message}"></span>
    </div>  <div th:if="${messageXacNhan}" class="alert alert-success custom-alert" role="alert">

    <span th:text="${messageXacNhan}"></span>
</div>

    <div class="page-wrapper">
        <div class="content">
            <div class="page-header">
                <div class="page-title">
                    <h4>Quản lý hóa đơn online</h4>
                </div>
            </div>
            <section class="comp-section">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card bg-white">
                            <div class="card-body">
                                <ul class="nav nav-tabs nav-tabs-solid nav-tabs-rounded nav-justified">
                                    <li class="nav-item">
                                        <a th:class="${activeAll}"
                                           href="#solid-rounded-justified-tab1"
                                           data-bs-toggle="tab">Tổng quan</a>
                                    </li>

                                    <li class="nav-item">
                                        <a th:class="${van_chuyen}"
                                           href="#solid-rounded-justified-tab3"
                                           data-bs-toggle="tab">Vận chuyển</a>
                                    </li>
                                    <li class="nav-item">
                                        <a th:class="${xac_nhan_tt}"
                                           href="#solid-rounded-justified-tab4"
                                           data-bs-toggle="tab">Thành Công/Hủy</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div th:class="${tabpane1}" id="solid-rounded-justified-tab1">
                                        <div class="row">
                                            <div class="col-lg-3 col-sm-6 col-12">
                                                <div class="dash-widget" style="height: 120px;">
                                                    <div class="dash-widgetimg">
                                                    <span><img style="height: 30px; width: 30px;"
                                                               src="/images/img/icons/dash1.svg" alt="img"></span>
                                                    </div>
                                                    <div class="dash-widgetcontent">
                                                        <h5><span class="counters"
                                                                  th:data-count="${sumBillOnline}"></span>
                                                        </h5>
                                                        <h6>Hóa đơn online</h6>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-sm-6 col-12">
                                                <div class="dash-widget dash1" style="height: 120px;">
                                                    <div class="dash-widgetimg">
                                                    <span><img style="height: 30px; width: 30px;"
                                                               src="/images/img/icons/dash2.svg" alt="img"></span>
                                                    </div>
                                                    <div class="dash-widgetcontent">
                                                        <h5>₫<span class="counters"
                                                                   th:text="${#numbers.formatDecimal(totalAmount, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></span>
                                                        </h5>
                                                        <h6>Tổng tiền</h6>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-sm-6 col-12">
                                                <div class="dash-widget dash3" style="height: 120px;">
                                                    <div class="dash-widgetimg">
                                                        <span>
                                                            <svg style="height: 30px; width: 30px;" viewBox="0 0 24 24"
                                                                 fill="none" xmlns="http://www.w3.org/2000/svg"><g
                                                                    id="SVGRepo_bgCarrier" stroke-width="0"></g><g
                                                                    id="SVGRepo_tracerCarrier" stroke-linecap="round"
                                                                    stroke-linejoin="round"></g><g
                                                                    id="SVGRepo_iconCarrier"> <path
                                                                    d="M2 16.9C2 15.5906 2 14.9359 2.29472 14.455C2.45963 14.1859 2.68589 13.9596 2.955 13.7947C3.43594 13.5 4.09063 13.5 5.4 13.5H6.5C8.38562 13.5 9.32843 13.5 9.91421 14.0858C10.5 14.6716 10.5 15.6144 10.5 17.5V18.6C10.5 19.9094 10.5 20.5641 10.2053 21.045C10.0404 21.3141 9.81411 21.5404 9.545 21.7053C9.06406 22 8.40937 22 7.1 22C5.13594 22 4.15391 22 3.4325 21.5579C3.02884 21.3106 2.68945 20.9712 2.44208 20.5675"
                                                                    stroke="#ee5455" stroke-width="1.5"
                                                                    stroke-linecap="round"></path> <path
                                                                    d="M22 7.1C22 8.40937 22 9.06406 21.7053 9.545C21.5404 9.81411 21.3141 10.0404 21.045 10.2053C20.5641 10.5 19.9094 10.5 18.6 10.5H17.5C15.6144 10.5 14.6716 10.5 14.0858 9.91421C13.5 9.32843 13.5 8.38562 13.5 6.5V5.4C13.5 4.09063 13.5 3.43594 13.7947 2.955C13.9596 2.68589 14.1859 2.45963 14.455 2.29472C14.9359 2 15.5906 2 16.9 2C18.8641 2 19.8461 2 20.5675 2.44208C20.9712 2.68945 21.3106 3.02884 21.5579 3.4325"
                                                                    stroke="#ee5455" stroke-width="1.5"
                                                                    stroke-linecap="round"></path> <path
                                                                    d="M16.5 6.25C16.5 5.73459 16.5 5.47689 16.6291 5.29493C16.6747 5.23072 16.7307 5.17466 16.7949 5.12911C16.9769 5 17.2346 5 17.75 5C18.2654 5 18.5231 5 18.7051 5.12911C18.7693 5.17466 18.8253 5.23072 18.8709 5.29493C19 5.47689 19 5.73459 19 6.25C19 6.76541 19 7.02311 18.8709 7.20507C18.8253 7.26928 18.7693 7.32534 18.7051 7.37089C18.5231 7.5 18.2654 7.5 17.75 7.5C17.2346 7.5 16.9769 7.5 16.7949 7.37089C16.7307 7.32534 16.6747 7.26928 16.6291 7.20507C16.5 7.02311 16.5 6.76541 16.5 6.25Z"
                                                                    fill="#ee5455"></path> <path
                                                                    d="M12.75 22C12.75 22.4142 13.0858 22.75 13.5 22.75C13.9142 22.75 14.25 22.4142 14.25 22H12.75ZM14.3889 13.8371L14.8055 14.4607L14.8055 14.4607L14.3889 13.8371ZM13.8371 14.3889L13.2135 13.9722L13.2135 13.9722L13.8371 14.3889ZM19 12.75H17V14.25H19V12.75ZM12.75 19V22H14.25V19H12.75ZM17 12.75C16.3134 12.75 15.742 12.7491 15.281 12.796C14.8075 12.8441 14.3682 12.9489 13.9722 13.2135L14.8055 14.4607C14.914 14.3882 15.078 14.3244 15.4328 14.2883C15.8002 14.2509 16.2822 14.25 17 14.25V12.75ZM14.25 17C14.25 16.2822 14.2509 15.8002 14.2883 15.4328C14.3244 15.078 14.3882 14.914 14.4607 14.8055L13.2135 13.9722C12.9489 14.3682 12.8441 14.8075 12.796 15.281C12.7491 15.742 12.75 16.3134 12.75 17H14.25ZM13.9722 13.2135C13.6719 13.4141 13.4141 13.6719 13.2135 13.9722L14.4607 14.8055C14.5519 14.669 14.669 14.5519 14.8055 14.4607L13.9722 13.2135Z"
                                                                    fill="#ee5455"></path> <path
                                                                    d="M22.75 13.5C22.75 13.0858 22.4142 12.75 22 12.75C21.5858 12.75 21.25 13.0858 21.25 13.5H22.75ZM20.7654 21.8478L21.0524 22.5407L21.0524 22.5407L20.7654 21.8478ZM21.8478 20.7654L21.1548 20.4784V20.4784L21.8478 20.7654ZM17 22.75H19V21.25H17V22.75ZM22.75 17V13.5H21.25V17H22.75ZM19 22.75C19.4557 22.75 19.835 22.7504 20.1454 22.7292C20.4625 22.7076 20.762 22.661 21.0524 22.5407L20.4784 21.1548C20.4012 21.1868 20.284 21.2163 20.0433 21.2327C19.7958 21.2496 19.4762 21.25 19 21.25V22.75ZM21.25 19C21.25 19.4762 21.2496 19.7958 21.2327 20.0433C21.2163 20.284 21.1868 20.4012 21.1548 20.4784L22.5407 21.0524C22.661 20.762 22.7076 20.4625 22.7292 20.1454C22.7504 19.835 22.75 19.4557 22.75 19H21.25ZM21.0524 22.5407C21.7262 22.2616 22.2616 21.7262 22.5407 21.0524L21.1548 20.4784C21.028 20.7846 20.7846 21.028 20.4784 21.1549L21.0524 22.5407Z"
                                                                    fill="#ee5455"></path> <path
                                                                    d="M2 7.1C2 5.13594 2 4.15391 2.44208 3.4325C2.68945 3.02884 3.02884 2.68945 3.4325 2.44208C4.15391 2 5.13594 2 7.1 2C8.40937 2 9.06406 2 9.545 2.29472C9.81411 2.45963 10.0404 2.68589 10.2053 2.955C10.5 3.43594 10.5 4.09063 10.5 5.4V6.5C10.5 8.38562 10.5 9.32843 9.91421 9.91421C9.32843 10.5 8.38562 10.5 6.5 10.5H5.4C4.09063 10.5 3.43594 10.5 2.955 10.2053C2.68589 10.0404 2.45963 9.81411 2.29472 9.545C2 9.06406 2 8.40937 2 7.1Z"
                                                                    stroke="#ee5455" stroke-width="1.5"></path> <path
                                                                    d="M5 6.25C5 5.73459 5 5.47689 5.12911 5.29493C5.17466 5.23072 5.23072 5.17466 5.29493 5.12911C5.47689 5 5.73459 5 6.25 5C6.76541 5 7.02311 5 7.20507 5.12911C7.26928 5.17466 7.32534 5.23072 7.37089 5.29493C7.5 5.47689 7.5 5.73459 7.5 6.25C7.5 6.76541 7.5 7.02311 7.37089 7.20507C7.32534 7.26928 7.26928 7.32534 7.20507 7.37089C7.02311 7.5 6.76541 7.5 6.25 7.5C5.73459 7.5 5.47689 7.5 5.29493 7.37089C5.23072 7.32534 5.17466 7.26928 5.12911 7.20507C5 7.02311 5 6.76541 5 6.25Z"
                                                                    fill="#ee5455"></path> <path
                                                                    d="M5 17.75C5 17.2346 5 16.9769 5.12911 16.7949C5.17466 16.7307 5.23072 16.6747 5.29493 16.6291C5.47689 16.5 5.73459 16.5 6.25 16.5C6.76541 16.5 7.02311 16.5 7.20507 16.6291C7.26928 16.6747 7.32534 16.7307 7.37089 16.7949C7.5 16.9769 7.5 17.2346 7.5 17.75C7.5 18.2654 7.5 18.5231 7.37089 18.7051C7.32534 18.7693 7.26928 18.8253 7.20507 18.8709C7.02311 19 6.76541 19 6.25 19C5.73459 19 5.47689 19 5.29493 18.8709C5.23072 18.8253 5.17466 18.7693 5.12911 18.7051C5 18.5231 5 18.2654 5 17.75Z"
                                                                    fill="#ee5455"></path> <path
                                                                    d="M16 17.75C16 17.0478 16 16.6967 16.1685 16.4444C16.2415 16.3352 16.3352 16.2415 16.4444 16.1685C16.6967 16 17.0478 16 17.75 16C18.4522 16 18.8033 16 19.0556 16.1685C19.1648 16.2415 19.2585 16.3352 19.3315 16.4444C19.5 16.6967 19.5 17.0478 19.5 17.75C19.5 18.4522 19.5 18.8033 19.3315 19.0556C19.2585 19.1648 19.1648 19.2585 19.0556 19.3315C18.8033 19.5 18.4522 19.5 17.75 19.5C17.0478 19.5 16.6967 19.5 16.4444 19.3315C16.3352 19.2585 16.2415 19.1648 16.1685 19.0556C16 18.8033 16 18.4522 16 17.75Z"
                                                                    fill="#ee5455"></path> </g></svg>
                                                        </span>
                                                    </div>
                                                    <div class="dash-widgetcontent">
                                                        <h5><span class="counters"
                                                                  th:data-count="${sumQuantityBaking}"></span></h5>
                                                        <h6>Thanh toán VnPay</h6>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-sm-6 col-12">
                                                <div class="dash-widget dash2" style="height: 120px;">
                                                    <div class="dash-widgetimg">
                                                        <span>
                                                            <svg style="height: 30px; width: 30px;"
                                                                 viewBox="0 0 512 512"
                                                                 xmlns="http://www.w3.org/2000/svg" fill="#ffffff"
                                                                 stroke="#ffffff"><g id="SVGRepo_bgCarrier"
                                                                                     stroke-width="0"></g><g
                                                                    id="SVGRepo_tracerCarrier" stroke-linecap="round"
                                                                    stroke-linejoin="round"></g><g
                                                                    id="SVGRepo_iconCarrier"><path fill="#00cfe8"
                                                                                                   d="M258 21.89c-.5 0-1.2 0-1.8.12-4.6.85-10.1 5.1-13.7 14.81-3.8 9.7-4.6 23.53-1.3 38.34 3.4 14.63 10.4 27.24 18.2 34.94 7.6 7.7 14.5 9.8 19.1 9 4.8-.7 10.1-5.1 13.7-14.7 3.8-9.64 4.8-23.66 1.4-38.35-3.5-14.8-10.4-27.29-18.2-34.94-6.6-6.8-12.7-9.22-17.4-9.22zM373.4 151.4c-11 .3-24.9 3.2-38.4 8.9-15.6 6.8-27.6 15.9-34.2 24.5-6.6 8.3-7.2 14.6-5.1 18.3 2.2 3.7 8.3 7.2 20 7.7 11.7.7 27.5-2.2 43-8.8 15.5-6.7 27.7-15.9 34.3-24.3 6.6-8.3 7.1-14.8 5-18.5-2.1-3.8-8.3-7.1-20-7.5-1.6-.3-3-.3-4.6-.3zm-136.3 92.9c-6.6.1-12.6.9-18 2.3-11.8 3-18.6 8.4-20.8 14.9-2.5 6.5 0 14.3 7.8 22.7 8.2 8.2 21.7 16.1 38.5 20.5 16.7 4.4 32.8 4.3 44.8 1.1 12.1-3.1 18.9-8.6 21.1-15 2.3-6.5 0-14.2-8.1-22.7-7.9-8.2-21.4-16.1-38.2-20.4-9.5-2.5-18.8-3.5-27.1-3.4zm160.7 58.1L336 331.7c4.2.2 14.7.5 14.7.5l6.6 8.7 54.7-28.5-14.2-10zm-54.5.1l-57.4 27.2c5.5.3 18.5.5 23.7.8l49.8-23.6-16.1-4.4zm92.6 10.8l-70.5 37.4 14.5 18.7 74.5-44.6-18.5-11.5zm-278.8 9.1a40.33 40.33 0 0 0-9 1c-71.5 16.5-113.7 17.9-126.2 17.9H18v107.5s11.6-1.7 30.9-1.8c37.3 0 103 6.4 167 43.8 3.4 2.1 10.7 2.9 19.8 2.9 24.3 0 61.2-5.8 69.7-9C391 452.6 494 364.5 494 364.5l-32.5-28.4s-79.8 50.9-89.9 55.8c-91.1 44.7-164.9 16.8-164.9 16.8s119.9 3 158.4-27.3l-22.6-34s-82.8-2.3-112.3-6.2c-15.4-2-48.7-18.8-73.1-18.8z"></path></g></svg>
                                                        </span>
                                                    </div>
                                                    <div class="dash-widgetcontent">
                                                        <h5><span class="counters"
                                                                  th:data-count="${sumQuantityDelivery}"></span></h5>
                                                        <h6>Thanh toán khi nhận hàng</h6>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count bg-warning">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonChuaThanhToan}"></h4>
                                                        <h5>Hóa đơn chưa thanh toán</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fe fe-file"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count das1">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonDaThanhToan}"></h4>
                                                        <h5>Hóa đơn đã thanh toán</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fe fe-file-plus"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count das2">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonChoXacNhan}"></h4>
                                                        <h5>Hóa đơn đang chờ xác nhận</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fas fa-clock"></i>
                                                        <!-- Thay đổi lớp biểu tượng ở đây -->
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count das2">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonChoLayHang}"></h4>
                                                        <h5>Hóa đơn chờ lấy hàng</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fe fe-truck"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count das2">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonDangGiao}"></h4>
                                                        <h5>Hóa đơn đang giao</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fas fa-shipping-fast"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count das3 bg-danger">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonHuy}"></h4>
                                                        <h5>Hóa đơn hủy</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fe fe-file-minus"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-sm-6 col-12 d-flex">
                                                <div class="dash-count das3 bg-primary">
                                                    <div class="dash-counts">
                                                        <h4 th:text="${hoaDonDaNhan}"></h4>
                                                        <h5>Hóa đơn đã nhận</h5>
                                                    </div>
                                                    <div class="dash-imgs">
                                                        <i class="fe fe-file-text"></i>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h4 class="card-title">Tất cả hóa đơn</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-top">
                                                            <div class="search-set">
                                                                <div class="search-path">
                                                                    <a class="btn btn-filter" id="filter_search">
                                                                        <img src="/images/img/icons/filter.svg" alt="img">
                                                                        <span><img src="/images/img/icons/closes.svg" alt="img"></span>
                                                                    </a>
                                                                </div>


                                                            </div>
                                                        </div>

                                                        <form method="get" th:action="@{/manage/bill/online/filter}">
                                                            <div class="card" id="filter_inputs">
                                                                <div class="card-body pb-0">
                                                                    <div class="row">
                                                                        <div class="col-lg-2 col-sm-6 col-12">
                                                                            <div class="form-group">
                                                                                <select class="select" id="locTrangThai" name="trangThai">
                                                                                    <option>Trạng thái</option>
                                                                                    <option value="Chờ thanh toán">Chờ thanh toán</option>
                                                                                    <option value="Chờ xác nhận">Chờ xác nhận</option>
                                                                                    <option value="Chờ lấy hàng">Chờ lấy hàng</option>
                                                                                    <option value="Chờ giao hàng">Chờ giao hàng</option>
                                                                                    <option value="Giao thành công">Giao thành công</option>
                                                                                    <option value="Đã Hủy">Đã Hủy</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-lg-1 col-sm-6 col-12 ms-auto"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>

                                                        <div class="table-responsive">
                                                            <div class="vertical-scroll scroll-demo">
                                                                <table  id="data-table" class="table datanew ">
                                                                    <thead>
                                                                    <tr>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            STT
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Mã Hóa Đơn
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Thời gian tạo
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Trạng thái
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Khách hàng
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Tổng SP
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Tổng tiền
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Hành động
                                                                        </th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <th:block th:each="bill, x: ${listHoaDonOnline}">
                                                                        <tr th:unless="${bill.trangThai == 7}">
                                                                            <td th:text="${x.index}"></td>
                                                                            <td th:text="${bill.maHD}"></td>
                                                                            <td th:text="${#dates.format(bill.tgTao, 'HH:mm yyyy-MM-dd')}"></td>


                                                                            <td th:if="${bill.trangThai == 0 }">Chờ thanh toán</td>
                                                                            <td th:if="${bill.trangThai == 1 }">Chờ xác nhận</td>
                                                                            <td th:if="${bill.trangThai == 2 }">Chờ lấy hàng</td>
                                                                            <td th:if="${bill.trangThai == 3 }">Chờ giao hàng</td>

                                                                            <td th:if="${bill.trangThai == 4 }">Giao thành công</td>
                                                                            <td th:if="${bill.trangThai == 5 }">Đã Hủy</td>

                                                                            <td th:text="${bill.khachHang.hoTenKH}"></td>
                                                                            <td th:text="${bill.tongSP}"></td>
                                                                            <td th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT')}"></td>
                                                                            <td>
                                                                                <i class="si si-eye"
                                                                                   th:data-bs-toggle="modal"
                                                                                   th:data-bs-target="'#modalDetailHD' + ${bill.idHD}"
                                                                                   style="cursor: pointer; margin: 0 20px 0 20px; color: #ff9f43;"></i>
                                                                                <i class="si si-speedometer"
                                                                                   th:data-bs-toggle="modal"
                                                                                   th:data-bs-target="'#modalXemLichSuThanhToan' + ${bill.idHD}"
                                                                                   style="cursor: pointer; margin: 0 20px 0 0; color: #ff9f43;"></i>
                                                                                <i class="fe fe-x"
                                                                                   th:if="${bill.trangThai == 1 or bill.trangThai == 2}"
                                                                                   th:data-bs-toggle="modal"
                                                                                   th:data-bs-target="'#modalHuyHoaDon' + ${bill.idHD}"
                                                                                   style="cursor: pointer; margin: 0 20px 0 0; color: #ff9f43;"></i>
                                                                                <i class="fe fe-edit"
                                                                                   th:if="${bill.trangThai == 1 or bill.trangThai == 2}"
                                                                                   th:data-bs-toggle="modal"
                                                                                   th:data-bs-target="'#modalEditHoaDon' + ${bill.idHD}"
                                                                                   style="cursor: pointer; margin: 0 20px 0 0; color: #ff9f43;"></i>

                                                                                <a th:href="@{'http://localhost:8081/manage/bill/online/print/' + ${bill.idHD}}"
                                                                                   onclick="window.open(this.href, '_blank'); return false;">
                                                                                    <i class="fe fe-printer"
                                                                                       data-bs-toggle="tooltip" title=""
                                                                                       style="cursor: pointer; color: #ff9f43;"
                                                                                       data-bs-original-title="In hóa đơn"
                                                                                       aria-label="fe fe-printer"></i>
                                                                                </a>
                                                                            </td>
                                                                        </tr>
                                                                    </th:block>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div th:class="${tabpane3}" id="solid-rounded-justified-tab3">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h4 class="card-title">Hóa đơn đang giao</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <div class="vertical-scroll scroll-demo">
                                                                <table class="table  datanew ">
                                                                    <thead>
                                                                    <tr>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            STT
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Mã Hóa Đơn
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Nhân viên giao
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Thời gian tạo
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Khách hàng
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Tổng tiền
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Trạng thái
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Hành động
                                                                        </th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                    <th:block
                                                                            th:each="bill, i: ${listHoaDonOnlineGiaoHang}">
                                                                        <tr th:unless="${bill.trangThai ==2  or bill.trangThai == 3  or bill.trangThai == 6}">

                                                                            <td th:text="${i.index}"></td>
                                                                            <td th:text="${bill.maHD}"></td>
                                                                            <td th:if="${bill.nhanVien != null}"
                                                                                th:text="${bill.nhanVien.hoTenNV}"></td>
                                                                            <td th:unless="${bill.nhanVien != null}">
                                                                                Chưa có NV
                                                                            </td>

                                                                            <td th:if="${bill.giaoHang.tgShip !=null}"
                                                                                th:text="${#dates.format(bill.giaoHang.tgShip, 'HH:mm yyyy-MM-dd')}"></td>
                                                                            <td th:unless="${bill.giaoHang.tgShip !=null}">
                                                                                Chưa giao
                                                                            </td>

                                                                            <td th:text="${bill.khachHang.hoTenKH}"></td>
                                                                            <td th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>
                                                                            <td th:if="${bill.trangThai == 1}">Chờ xác
                                                                                nhận
                                                                            </td>
                                                                            <td th:if="${bill.trangThai == 2}">Chờ lấy
                                                                                hàng
                                                                            </td>
                                                                            <td>
                                                                                <i class="fe fe-eye"
                                                                                   th:data-bs-toggle="modal"
                                                                                   th:data-bs-target="'#viewBillGH' + ${bill.idHD}"
                                                                                   style="cursor: pointer; margin: 0 10px 0 20px;"></i>
                                                                                <a th:href="@{'/manage/bill/online/delivery/' + ${bill.idHD}}">
                                                                                    <i class="fe fe-edit-3"
                                                                                       data-bs-toggle="tooltip"
                                                                                       title="Xem vận đơn"
                                                                                       style="cursor: pointer;"></i>
                                                                                </a>
                                                                            </td>
                                                                        </tr>
                                                                    </th:block>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div th:class="${tabpane2}" id="solid-rounded-justified-tab4">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h4 class="card-title">Hóa đơn hoàn thành/hủy</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <div class="vertical-scroll scroll-demo">
                                                                <table class="table  datanew ">
                                                                    <thead>
                                                                    <tr>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            STT
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Mã Hóa Đơn
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Hình thức thanh toán
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Thời gian tạo
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Trạng thái
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Thời gian Hủy
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Thời gian TT
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Khách hàng
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Tổng tiền
                                                                        </th>
                                                                        <th style="position: sticky; top: 0;background-color: #ff9f43; color: white;">
                                                                            Hành động
                                                                        </th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <th:block th:each="bill, i: ${listHoaDonOnline}">
                                                                        <tr th:if="${bill.trangThai == 4 or bill.trangThai == 5}">

                                                                            <td th:text="${i.index}"></td>
                                                                            <td th:text="${bill.maHD}"></td>

                                                                            <td th:if="${bill.hinhThucThanhToan == 1}">
                                                                                VNPAY
                                                                            </td>
                                                                            <td th:if="${bill.hinhThucThanhToan == 0}">
                                                                                TT khi nhận hàng
                                                                            </td>

                                                                            <td th:text="${#dates.format(bill.tgTao, 'HH:mm yyyy-MM-dd')}"></td>

                                                                            <td th:if="${bill.trangThai == 4}">Thành
                                                                                công
                                                                            </td>
                                                                            <td th:if="${bill.trangThai == 5}">Đã hủy
                                                                            </td>

                                                                            <td th:if="${bill.tgHuy != null}"
                                                                                th:text="${#dates.format(bill.tgHuy, 'HH:mm yyyy-MM-dd')}"></td>

                                                                            <td th:if="${bill.tgHuy == null}">Chưa có
                                                                            </td>

                                                                            <td th:if="${bill.tgThanhToan != null}"
                                                                                th:text="${#dates.format(bill.tgThanhToan, 'HH:mm yyyy-MM-dd')}"></td>
                                                                            <td th:if="${bill.tgThanhToan == null}">Chưa
                                                                                có
                                                                            </td>

                                                                            <td th:text="${bill.khachHang.hoTenKH}"></td>
                                                                            <td th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>
                                                                            <td>
                                                                                <i class="si si-speedometer"
                                                                                   th:data-bs-toggle="modal"
                                                                                   th:data-bs-target="'#modalXemLichSuThanhToan' + ${bill.idHD}"
                                                                                   style="cursor: pointer; margin: 0 20px 0 0; color: #ff9f43;"></i>
                                                                            </td>
                                                                        </tr>
                                                                    </th:block>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<section>

    <!-- Modal All Purchase Begin -->

    <!-- Modal All Purchase End -->

    <!--    Modal xem lịch sử thanh toán-->
    <th:block th:each="bill: ${listHoaDonOnline}">
        <div th:unless="${bill.trangThai == 6}" class="modal fade" th:id="'modalXemLichSuThanhToan' + ${bill.idHD}"
             tabindex="-1" aria-labelledby="create" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="width: 1200px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Lịch sử thanh toán</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-5 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Mã Hóa Đơn :</label>
                                    <p style="font-size: 13pt; font-weight: 700;" th:text="${bill.maHD}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Tên Khách Hàng
                                        :</label>
                                    <p th:text="${bill.khachHang.hoTenKH}"></p>
                                </div>
                            </div>
                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Tổng tiền</label>
                                    <p th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-5 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Thời gian tạo hóa
                                        đơn :</label>
                                    <p th:text="${#dates.format(bill.tgTao, 'HH:mm yyyy-MM-dd')}"></p>

                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Loại hóa đơn</label>
                                    <p>Hóa đơn mua hàng</p>
                                </div>
                            </div>
                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Trạng thái hóa
                                        đơn</label>
                                    <p th:if="${bill.trangThai == 0 }">Chờ thanh toán</p>
                                    <p th:if="${bill.trangThai == 1 }">Chờ xác nhận </p>
                                    <p th:if="${bill.trangThai == 2 }">Chờ lấy hàng</p>
                                    <p th:if="${bill.trangThai == 3 }">Chờ giao hàng</p>
                                    <p th:if="${bill.trangThai == 4 }">Giao thành công</p>
                                    <p th:if="${bill.trangThai == 5 }">Đã Hủy</p>
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Lịch sử thanh toán
                                        của hóa đơn</label>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Mã LSTT</label>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Số tiền</label>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Thời gian</label>
                                </div>
                            </div>
                            <div class="col-lg-5 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Nội dung </label>
                                </div>
                            </div>
                            <!-- So lan thay doi -->
                            <th:block th:each="x: ${bill.lichSuThanhToans}">
                                <div class="col-lg-3 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${x.maLSTT}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></p>

                                    </div>
                                </div>
                                <div class="col-lg-2 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${#dates.format(x.tgThanhToan, 'HH:mm yyyy-MM-dd')}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-5 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${x.noiDungThanhToan}"></p>
                                    </div>
                                </div>
                            </th:block>
                            <!-- So lan thay doi -->

                            <th:block th:each="x: ${bill.lichSuThanhToans}">
                                <div th:if="${x.trangThai == 3 }" class="col-lg-12 col-sm-12 col-12">
                                    <button th:data-bs-toggle="modal"
                                            th:data-bs-target="'#xacNhanHoanTienHDHuy' + ${bill.idHD}"
                                            class="btn btn-submit">Hoàn tiền tới khách hàng
                                    </button>
                                </div>
                            </th:block>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
    <!--    Modal xem lịch sử thanh toán-->


    <!--    Modal delete thanh toán-->
    <th:block th:each="bill: ${listHoaDonOnline}">
        <div class="modal fade" th:id="'modalHuyHoaDon' + ${bill.idHD}" tabindex="-1" aria-labelledby="create"
             aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="width: 1200px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Hủy hóa đơn </h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form th:action="@{'/manage/bill/online/delete/' + ${bill.idHD}}" method="get"
                              id="huyHoaDonForm">
                            <div class="form-group">
                                <label for="lyDoHuy">Lí do hủy hóa đơn: </label>
                                <input type="text" class="form-control" id="lyDoHuy" th:id="lyDoHuy" name="lyDoHuy"
                                       th:name="lyDoHuy"/>
                                <div class="invalid-feedback">Vui lòng nhập lí do hủy hóa đơn.</div>
                            </div>
                            <button type="submit" class="btn btn-danger" style="margin-top: 21px">Hủy hóa đơn</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </th:block>


    <!--    Modal delete thanh toán-->

    <!--    Modal edit thanh toán-->
    <th:block th:each="bill: ${listHoaDonOnline}">
        <div class="modal fade" th:id="'modalEditHoaDon' + ${bill.idHD}" tabindex="-1" aria-labelledby="create"
             aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="width: 1200px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Chỉnh sửa hóa đơn </h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane show active">
                            <div class="row">
                                <div class="col-lg-7 col-sm-12 tabs_wrapper">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="table-top">
                                                <form method="get" action="/manage/bill/search">
                                                    <div class="search-set">
                                                        <div class="search-path">
                                                            <button class="btn btn-searchset" type="submit">
                                                                <img src="/images/img/icons/search-white.svg" alt="img"></button>
                                                        </div>
                                                        <div>
                                                            <div>
                                                                <input type="search" class="form-control form-control-sm" name="keyword" placeholder="Tìm kiếm..." aria-controls="DataTables_Table_0">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="tabs_container">
                                        <div class="row">
                                            <div th:if="${nullHoaDon}"
                                                 class="alert alert-success text-center">
                                                <h3 th:text="${nullHoaDon}"></h3>
                                            </div>
                                        </div>

                                        <table class="table table-bordered product-table">
                                            <thead>
                                            <tr>
                                                <th>Hình Ảnh</th>
                                                <th>Số Lượng</th>
                                                <th>Tên Giày</th>
                                                <th>Giá Bán</th>
                                                <th>Màu Sắc</th>
                                                <th>Hành Động</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <th:block th:each="product : ${listSanPham}">
                                                <tr>
                                                    <td>
                                                        <img style="height: 90px;width: 90px"
                                                             th:src="@{'/images/imgsProducts/'+ ${product.hinhAnh}}"
                                                             alt="img">
                                                    </td>
                                                    <td>
                                                        <h6>[[${product.soLuong}]]</h6>
                                                    </td>
                                                    <td>
                                                        <h3 style="font-size: 12pt">
                                                            [[${product.tenGiay}]]</h3>
                                                    </td>
                                                    <td>
                                                        <h3 style="font-size: 12pt"
                                                            th:text=" ${#numbers.formatDecimal(product.giaBan, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')} + ' đ'"></h3>
                                                    </td>
                                                    <td>
                                                        <h4 style="font-size: 12pt"
                                                            th:text="${product.mauSac}"></h4>
                                                    </td>
                                                    <td>
                                                        <a style="font-size: 11pt"
                                                           th:href="@{'/manage-bill-online/chon-size2/' + ${product.idGiay}+'/'+${product.mauSac} }"
                                                           class="btn btn-outline-warning">Chọn</a>
                                                    </td>
                                                </tr>
                                            </th:block>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                                <div class="col-lg-5 col-sm-12 ">
                                    <div class="order-list">
                                        <div class="orderid">
                                            <nav class="navbar navbar-expand-lg">
                                                <a class="btn" th:href="@{/ban-hang/add-cart}">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="25"
                                                         height="25"
                                                         fill="currentColor"
                                                         class="bi bi-person-add" viewBox="0 0 16 16">
                                                        <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Zm-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>
                                                        <path d="M8.256 14a4.474 4.474 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10c.26 0 .507.009.74.025.226-.341.496-.65.804-.918C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4s1 1 1 1h5.256Z"/>
                                                    </svg>
                                                </a>


                                            </nav>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="solid-rounded-justified-tab2">

                        </div>
                    </div>


                    <div class="modal-body">

                        <table class="table">
                            <thead>
                            <tr>
                                <th>Sản phẩm</th>
                                <th>Phân loại</th>
                                <th>Số lượng</th>
                                <th>Thành tiền</th>
                                <th>Hoạt động</th>
                            </tr>
                            </thead>
                            <tbody>
                            <th:block th:each="x: ${bill.hoaDonChiTiets}">


                                <tr th:if="${x.chiTietGiay.trangThai == 1}" id="productId"
                                    th:value="${x.chiTietGiay.idCTG}">

                                    <td style="width: 400px;" class="product__cart__item">
                                        <div class="product__cart__item__pic">
                                            <a th:href="@{'/buyer/shop-details/' + ${x.chiTietGiay.giay.idGiay} + '/' +  ${x.chiTietGiay.mauSac.idMau}}">
                                                <img style="width:90px; height:90px;"
                                                     th:src="@{'/images/imgsProducts/' + ${x.chiTietGiay.hinhAnh.url1}}"></a>
                                        </div>
                                        <div class="product__cart__item__text">
                                            <a th:href="@{'/buyer/shop-details/' + ${x.chiTietGiay.giay.idGiay} + '/' +  ${x.chiTietGiay.mauSac.idMau}}">
                                                <h6 style="margin-top: -22px;"
                                                    th:text="${x.chiTietGiay.giay.tenGiay}"></h6>
                                            </a>
                                            <h5 class="cart__price"
                                                th:text="'₫' +  ${#numbers.formatDecimal(x.chiTietGiay.giaBan, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></h5>
                                        </div>

                                    </td>
                                    <td style="width: 175px;" class="quantity__item">
                                        <div style="margin-top: -20px; display: block;">
                                            <span id="showButton" style="font-weight: normal; font-size: medium;">Phân loại :</span>
                                            <a th:href="@{'/buyer/cart/option/' + ${x.chiTietGiay.giay.idGiay} + '/' + ${x.chiTietGiay.mauSac.idMau}+ '/' + ${x.chiTietGiay.idCTG}}">
                                                <img style="height: 10px; width: 10px;"
                                                     src="/images/img/icon/dropdown.png" alt="">
                                            </a>
                                        </div>
                                        <div style="padding-right: 20px;">
                                            <span style="font-size: 10pt; font-weight: 500; color: rgba(0,0,0,.54);"
                                                  th:text="'Colors : ' + ${x.chiTietGiay.mauSac.tenMau}"></span>
                                            <span style="font-size: 10pt; font-weight: 500; color: rgba(0,0,0,.54);"
                                                  th:text="'Size : ' + ${x.chiTietGiay.size.soSize}"></span>
                                        </div>
                                    </td>

                                    <td style="width: 175px;" class="quantity__item">
                                        <div class="quantity">
                                            <input class="quantityInput" oninput="validateQuantity(this)"
                                                   th:value="${x.soLuong}"
                                                   style="width: 50px; text-align: center; border: 1px solid black;"
                                                   type="number" name="quantities">
                                        </div>
                                    </td>


                                    <td style="width: 140px;" class="cart__price totalAmount"
                                        th:text="'₫' + ${#numbers.formatDecimal(x.chiTietGiay.giaBan * x.soLuong, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>

                                    <td>
                                        <form th:action="@{/manage/bill/deleteChiTietGiay/{idCTG}(idCTG=${x.chiTietGiay.idCTG})}" method="post">
                                            <button type="submit">Xóa</button>
                                        </form>
                                    </td>



                                    <!-- Modal -->
                                    <div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog"
                                         aria-labelledby="confirmationModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-body">
                                                    Bạn có chắc chắn muốn xoá sản phẩm này khỏi giỏ hàng không?
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal">Hủy
                                                    </button>
                                                    <a th:href="@{/buyer/cart/delete/{idCTG}(idCTG=${x.chiTietGiay.idCTG})}"
                                                       class="btn btn-primary">Xoá</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </tr>


                            </th:block>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
    <!--    Modal edit thanh toán-->




    <!-- Modal detail Hóa Đơn begin-->
    <th:block th:each="bill: ${listHoaDonOnline}">
        <div th:unless="${bill.trangThai == 6}" class="modal fade" th:id="'modalDetailHD' + ${bill.idHD}" tabindex="-1"
             aria-labelledby="create" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="width: 900px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Chi tiết hóa đơn</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Mã Hóa Đơn :</label>
                                    <p th:text="${bill.maHD}"></p>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Tên Khách Hàng
                                        :</label>
                                    <p th:text="${bill.khachHang.hoTenKH}"></p>
                                </div>
                            </div>

                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Tổng tiền</label>
                                    <p th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Tổng tiền đã
                                        giảm</label>
                                    <p th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT')}"></p>
                                </div>
                            </div>

                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Thời gian tạo hóa
                                        đơn</label>
                                    <p th:text="${#dates.format(bill.tgTao, 'HH:mm yyyy-MM-dd')}"></p>
                                </div>
                            </div>

                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Loại hóa đơn</label>
                                    <p> Hóa đơn mua hàng</p>
                                </div>
                            </div>

                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Trạng thái hóa
                                        đơn</label>
                                    <p th:if="${bill.trangThai == 0 }">Chờ thanh toán</p>
                                    <p th:if="${bill.trangThai == 1 }">Chờ xác nhận </p>
                                    <p th:if="${bill.trangThai == 2 }">Chờ lấy hàng</p>
                                    <p th:if="${bill.trangThai == 3 }">Chờ giao hàng</p>
                                    <p th:if="${bill.trangThai == 4 }">Giao thành công</p>
                                    <p th:if="${bill.trangThai == 5 }">Đã Hủy</p>
                                </div>

                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600; color: red">Lí do
                                        hủy:</label>
                                    <p th:text="${#strings.isEmpty(bill.getLyDoHuy()) ? 'Không có' : bill.getLyDoHuy()}"></p>
                                </div>
                            </div>


                            <div class="col-lg-12 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Chi tiết hóa
                                        đơn</label>
                                </div>
                            </div>

                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Ảnh</label>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Tên</label>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Phân loại</label>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Số lượng</label>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label style="border: none; font-size: 12pt; font-weight: 600;">Thành tiền</label>
                                </div>
                            </div>

                            <!-- So lan thay doi -->
                            <th:block th:each="x: ${bill.hoaDonChiTiets}">
                                <div class="col-lg-2 col-sm-12 col-12">
                                    <div class="form-group">
                                        <img th:src="@{'/images/imgsProducts/'+ ${x.chiTietGiay.hinhAnh.url1}}">
                                    </div>
                                </div>
                                <div class="col-lg-2 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${x.chiTietGiay.giay.tenGiay}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="'Size : ' + ${x.chiTietGiay.size.soSize}"></p>
                                        <p th:text="'Màu sắc : ' + ${x.chiTietGiay.mauSac.tenMau}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="${x.soLuong}"></p>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-sm-12 col-12">
                                    <div class="form-group">
                                        <p th:text="'₫'+${#numbers.formatDecimal(x.donGia, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></p>
                                    </div>
                                </div>
                            </th:block>

                            <!-- So lan thay doi -->

                        </div>
                        <div class="col-lg-12">
                            <a class="btn btn-cancel" data-bs-dismiss="modal" style="margin-right: 30px;">OK</a>
                            <a th:if="${bill.trangThai == 0 or bill.trangThai == 1}"
                               th:href="@{'/manage/bill/online/delete/' + ${bill.idHD}}"
                               class="btn btn-cancel">Hủy hóa đơn</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
    <!-- Modal detail Hóa Đơn end-->




    <!-- Modal All giao hàng Begin -->
    <th:block th:each="bill: ${listHoaDonOnlineGiaoHang}">
        <div class="modal fade" th:id="'viewBillGH' + ${bill.idHD}" tabindex="-1" aria-labelledby="create"
             aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered" role="document" style="width: 900px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Chi tiết hóa đơn đang giao</h5>

                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Mã đơn hàng :</label>
                                    <p style="font-size: 13pt; font-weight: 700;" th:text="${bill.maHD}"></p>
                                </div>
                            </div>

                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số tiền :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="'₫'+${#numbers.formatDecimal(bill.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></p>
                                </div>
                            </div>

                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số lượng SP :</label>
                                    <p style="font-size: 12pt; font-weight: 700;" th:text="${bill.tongSP}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian tạo :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${#dates.format(bill.tgTao, 'HH:mm yyyy-MM-dd')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Nhân viên giao :</label>
                                    <p th:if="${bill.nhanVien != null}" th:text="${bill.nhanVien.hoTenNV}"
                                       style="font-size: 12pt; font-weight: 700;"></p>
                                    <p th:if="${bill.nhanVien == null}" style="font-size: 12pt; font-weight: 700;">Chưa
                                        có</p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số điện thoại người nhận:</label>
                                    <p style="font-size: 12pt; font-weight: 700;"
                                       th:text="${bill.giaoHang.sdtNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Tên khách hàng :</label>
                                    <p style="font-size: 12pt; font-weight: 700;"
                                       th:text="${bill.giaoHang.tenNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian giao hàng :</label>
                                    <p style="font-size: 11pt; font-weight: 600;" th:if="${bill.giaoHang.tgShip !=null}"
                                       th:text="${#dates.format(bill.giaoHang.tgShip, 'HH:mm yyyy-MM-dd')}"></p>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:unless="${bill.giaoHang.tgShip !=null}">Chưa
                                        giao</p>
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Địa chỉ nhận hàng :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${bill.giaoHang.diaChiNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <a class="btn btn-cancel" data-bs-dismiss="modal">OK</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
    <!-- Modal All Purchase End a-->

    <!-- Modal All giao hàng Begin -->
    <div th:if="${showEditBillDelivery}" th:object="${billDelivery}" class="modal fade" id="editBillDelivery"
         tabindex="-1" aria-labelledby="create" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi tiết hóa đơn đang giao</h5>

                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form th:action="@{'/manage/bill/online/delivery/confirm/' + ${billDelivery.idHD}}" method="post">
                        <div class="row">
                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Mã đơn hàng :</label>
                                    <p style="font-size: 13pt; font-weight: 700;" th:text="${billDelivery.maHD}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số tiền :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="'₫'+${#numbers.formatDecimal(billDelivery.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số lượng SP :</label>
                                    <p style="font-size: 12pt; font-weight: 700;" th:text="${billDelivery.tongSP}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian tạo :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${#dates.format(billDelivery.tgTao, 'HH:mm yyyy-MM-dd')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Nhân viên giao :</label>
                                    <select name="idNhanVien" class="form-control nested">
                                        <th:block th:each="nv: ${listNhanVienGiao}">
                                            <option th:value="${nv.idNV}"
                                                    th:text="${nv.hoTenNV + '--' + nv.maNV}"></option>
                                        </th:block>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số điện thoại người nhận:</label>
                                    <p style="font-size: 12pt; font-weight: 700;"
                                       th:text="${billDelivery.giaoHang.sdtNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Tên khách hàng :</label>
                                    <p style="font-size: 12pt; font-weight: 700;"
                                       th:text="${billDelivery.giaoHang.tenNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian giao hàng :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:if="${billDelivery.giaoHang.tgShip !=null}"
                                       th:text="${#dates.format(billDelivery.giaoHang.tgShip, 'HH:mm yyyy-MM-dd')}"></p>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:unless="${billDelivery.giaoHang.tgShip !=null}">Chưa giao</p>
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Địa chỉ nhận hàng :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${billDelivery.giaoHang.diaChiNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <button type="submit" class="btn btn-submit me-2">Xác nhận</button>
                                <a class="btn btn-cancel" data-bs-dismiss="modal">Đóng</a>
                            </div>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal All Purchase End a -->

    <!-- Modal All giao hàng Begin -->
    <div th:if="${showEditBillRefundDelivery}" th:object="${billDelivery}" class="modal fade"
         id="editBillRefundDelivery" tabindex="-1" aria-labelledby="create" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi tiết hóa đơn hoàn hàng</h5>

                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form th:action="@{'/manage/bill/online/refund/delivery/confirm/' + ${billDelivery.idHD}}"
                          method="post">
                        <div class="row">
                            <div class="col-lg-4 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Mã đơn hàng :</label>
                                    <p style="font-size: 13pt; font-weight: 700;" th:text="${billDelivery.maHD}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số tiền :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="'₫'+${#numbers.formatDecimal(billDelivery.tongTien, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số lượng SP :</label>
                                    <p style="font-size: 12pt; font-weight: 700;" th:text="${billDelivery.tongSP}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian tạo :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${#dates.format(billDelivery.tgTao, 'HH:mm yyyy-MM-dd')}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Nhân viên giao :</label>
                                    <select name="idNhanVien" class="form-control nested">
                                        <th:block th:each="nv: ${listNhanVienGiao}">
                                            <option th:value="${nv.idNV}"
                                                    th:text="${nv.hoTenNV + '--' + nv.maNV}"></option>
                                        </th:block>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Số điện thoại người nhận:</label>
                                    <p style="font-size: 12pt; font-weight: 700;"
                                       th:text="${billDelivery.giaoHang.sdtNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Tên khách hàng :</label>
                                    <p style="font-size: 12pt; font-weight: 700;"
                                       th:text="${billDelivery.giaoHang.tenNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Thời gian giao hàng :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:if="${billDelivery.giaoHang.tgShip !=null}"
                                       th:text="${#dates.format(billDelivery.giaoHang.tgShip, 'HH:mm yyyy-MM-dd')}"></p>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:unless="${billDelivery.giaoHang.tgShip !=null}">Chưa giao</p>
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>Địa chỉ nhận hàng :</label>
                                    <p style="font-size: 11pt; font-weight: 600;"
                                       th:text="${billDelivery.giaoHang.diaChiNguoiNhan}"></p>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <button type="submit" class="btn btn-submit me-2">Xác nhận</button>
                                <a class="btn btn-cancel" data-bs-dismiss="modal">Đóng</a>
                            </div>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal All Purchase End -->


</section>

<script src="/js/jquery-3.6.0.min.js"></script>
<script src="/js/feather.min.js"></script>
<script src="/js/jquery.slimscroll.min.js"></script>
<script src="/js/jquery.dataTables.min.js"></script>
<script src="/js/dataTables.bootstrap4.min.js"></script>
<script src="/plugins/select2/js/select2.min.js"></script>
<script src="/plugins/select2/js/custom-select.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/plugins/scrollbar/scrollbar.min.js"></script>
<script src="/plugins/scrollbar/custom-scroll.js"></script>
<script src="/plugins/sweetalert/sweetalert2.all.min.js"></script>
<script src="/plugins/sweetalert/sweetalerts.min.js"></script>
<script src="/js/script.js"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    document.addEventListener('DOMContentLoaded', function() {
        var huyHoaDonForm = document.getElementById('huyHoaDonForm');
        huyHoaDonForm.addEventListener('submit', function(event) {
            var lyDoHuyInput = document.getElementById('lyDoHuy');
            var invalidFeedback = document.querySelector('#huyHoaDonForm .invalid-feedback');
            if (lyDoHuyInput.value.trim() === '') {
                event.preventDefault(); // Ngăn form submit nếu ly do huy không được nhập
                invalidFeedback.style.display = 'block';
            } else {
                invalidFeedback.style.display = 'none';
            }
        });
    });
    /*]]>*/
</script>
<script>
    // Lấy tất cả các container của form
    const formContainers = document.querySelectorAll('.form-container');

    // Duyệt qua từng form và gán sự kiện cho input
    formContainers.forEach(function (container) {
        const maHDElement = container.querySelector('.maHD');
        const inputMaHDElement = container.querySelector('.inputMaHD');
        const btnSubmitElement = container.querySelector('.btn-submit');

        inputMaHDElement.addEventListener('input', function () {
            if (inputMaHDElement.value === maHDElement.innerText) {
                btnSubmitElement.removeAttribute('disabled');
            } else {
                btnSubmitElement.setAttribute('disabled', 'true');
                alert('Mã hóa đơn không đúng!');

            }
        });
    });
</script>
<!--Confirm thong bao pay end-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".btn-cancel").forEach(function (btn) {
            btn.addEventListener("click", function (event) {
                if (btn.getAttribute("data-bs-dismiss") !== "modal") {
                    setTimeout(function () {
                        window.location.href = btn.getAttribute("href");
                    }, 500);  // Thời gian chờ để modal đóng hoàn toàn
                    event.preventDefault();
                }
            });
        });
    });
</script>

<script>
    $(document).ready(function () {
        $('#editBillDelivery').modal('show');
    });
    $(document).ready(function () {
        $('#messBillDeliveryThanhCong').modal('show');
    });
    $(document).ready(function () {
        $('#editBillRefundDelivery').modal('show');
    });
    $(document).ready(function () {
        $('#hoanTienThanhCong').modal('show');
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const alert = document.querySelector('.custom-alert');
        if (alert) {
            setTimeout(() => {
                alert.classList.add('hide');
            }, 5000); // 5 giây
        }
    });
</script>

<script>
    $(document).ready(function () {
        $("#locTrangThai").change(function () {
            var maTrangThai = $(this).val();


            // Ẩn tất cả các dòng trong bảng
            $("#data-table tbody tr").hide();

            // Hiển thị các dòng có giá trị kích thước tương ứng
            $("#data-table tbody tr").each(function () {
                var maTT = $(this).find("td:eq(3)").text(); // Vị trí cột chứa giá trị kích thước
                if (maTT === maTrangThai || maTrangThai === "Trạng thái") {
                    $(this).show();
                }
            });
            console.log(maTrangThai);
        });
    });
</script>
</body>
</html>